:root {
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  color-scheme: light dark;
  color: #bdbdbd;
  background-color: #242424;
  --link-color: #53b05a;
  --link-hover-color: #3f8f3f;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  font-weight: 500;
  color: var(--link-color);
  text-decoration: inherit;
}
a:hover {
  color: var(--link-hover-color);
}

body { margin: 0; min-width: 320px; min-height: 100vh; }

h1 {
  font-size: 2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: #1a1a1a;
  cursor: pointer;
  transition: border-color 0.25s;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  color: #cfcfcf;
  padding: 4px;
}
button svg {
  width: 20px;
  height: 20px;
}
button:hover {
  /* slightly subtler white overlay */
  background-color: rgba(255,255,255,0.03);
}
button:focus,
button:focus-visible {
  outline: none;
  background-color: rgba(255,255,255,0.03);
}

/* Smooth transitions for theme changes: background/color/border animate */
:root, body, .app-shell, .app-sidebar, .app-content, .modal, .global-footer,
.settings-wrap, .settings-wrap section, .profile-card .avatar-preview, input, button {
  transition: background-color 240ms ease, color 240ms ease, border-color 240ms ease, box-shadow 240ms ease;
}

/* Explicit light theme override */
[data-theme="light"] {
  color: #213547;
  background-color: #ffffff;
  --link-color: #2f7d3a;
  --link-hover-color: #215928;
}
[data-theme="light"] button { background-color: #f9f9f9; color:#213547 }

/* Ensure global footer is white in light theme */
[data-theme="light"] .global-footer {
  background: #ffffff; /* opaque white */
  color: #213547;
  border-top-color: #e6e6e6;
}

/* Ensure main app shell respects the data-theme background */
[data-theme="light"] .app-shell {
  background: #ffffff;
  color: #213547;
}

/* auth / logout button light-mode styling */
[data-theme="light"] .auth-btn,
[data-theme="light"] .user-chip,
[data-theme="light"] .logout-btn {
  background: #f5f7f6;
  color: #0f3d33;
  border: 1px solid #e6efea;
}

/* App shell layout */
.app-shell { display: flex; flex-direction: column; height: 100vh; width: 100%; background:#1c1c1c; color:#d0d0d0; }
.app-header { display:flex; align-items:center; gap:10px; padding:6px 10px; border-bottom:1px solid #2b2b2b; }
.sidebar-toggle {  color:#dcdcdc; padding:6px; border-radius:6px; }
.sidebar-toggle svg { width:20px; height:20px; }
.spacer { flex:1 }
.auth-btn, .user-chip, .logout-btn {
  background: #2b2b2b;
  color: #cfcfcf;
  height: 32px;
  padding: 4px 8px;
  display: inline-flex;
  align-items: center;
  border-radius: 6px;
  min-width: 120px;
  justify-content: center;
  font-size: 0.95em;
  line-height: 1;
  box-sizing: border-box;
}
.user-chip { font-size: 0.95em }
.user-menu { position: relative; display: inline-block }
/* dropdown width matches button min-width; remove extra padding so button edges align */
.user-menu-dropdown {
  position: absolute;
  left: 0;
  right: 0;
  top: calc(100% + 6px);
  background: #2b2b2b;
  border: 1px solid #3a3a3a;
  border-radius: 6px;
  padding: 0;
  z-index: 10;
  box-sizing: border-box;
  overflow: hidden;
  width: 100%; /* match parent width */
}
.user-menu-dropdown button {
  width: 100%;
  text-align: center;
  padding: 4px 8px;
  height: 32px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  background: transparent;
  border: 1px solid transparent;
  box-sizing: border-box;
  font-size: 0.95em;
}
.user-menu-dropdown button:hover { background: rgba(255,255,255,0.03); color: #d0d0d0 }

.app-body { display:flex; flex:1; overflow:hidden }
.app-sidebar { width: 20%; min-width: 220px; max-width: 320px; border-right:1px solid #2b2b2b; overflow:auto }
.app-content { flex:1; padding:16px; overflow:auto }
.app-shell.sidebar-collapsed .app-sidebar { transform: translateX(-100%); }
.app-shell.sidebar-collapsed .app-content { padding-left: 16px; }
.app-body { position: relative; display:flex; flex:1; overflow:hidden }
/* Content 永远占满 */
.app-content { flex:1; padding:16px; overflow:auto; position:relative; z-index:0 }

/* Overlay Sidebar：默认隐藏，打开后覆盖 80% 宽度 */
.app-sidebar { 
  position: fixed; /* cover header and full viewport */
  top: 0; left: 0; bottom: 0; 
  height: 100vh;
  width: 67%; 
  max-width: none;
  min-width: 0;
  background:#1f1f1f; 
  border-right:1px solid #2b2b2b; 
  overflow:auto; 
  transform: translateX(-100%);
  transition: transform .25s ease, width .25s ease, min-width .25s ease, max-width .25s ease;
  z-index: 100; /* higher so it covers header */
}
.app-sidebar.open { transform: translateX(0); }

/* Desktop: keep sidebar always visible and as 20% of page width */
@media (min-width: 900px) {
  .sidebar-toggle { display: none; }
  .sidebar-backdrop { display: none; }
  .app-sidebar {
    position: fixed; /* full-height fixed sidebar starting at top */
    top: 0; left: 0; bottom: 0;
    height: 100vh;
    transform: none !important;
    transition: none !important;
    width: 20%;
    min-width: 220px;
    max-width: 320px;
    z-index: 100;
    padding-top: 0; /* ensure no gap at top */
  }
  /* shift header and content to the right so they don't overlap the fixed sidebar */
  .app-header { padding-left: calc(20% + 10px); }
  .app-content { margin-left: 20%; }
  /* ensure collapsed state doesn't hide sidebar on desktop */
  .app-shell.sidebar-collapsed .app-sidebar { transform: none; }
  .app-shell.sidebar-collapsed .app-content { padding-left: 0; }
}

/* 遮罩层 */
.sidebar-backdrop {
  position:absolute; inset:0; background:rgba(0,0,0,.4); z-index:1;
}
.sidebar-toggle {   display:inline-flex; align-items:center; justify-content:center; }
.n-button__content { display:inline-flex; align-items:center; justify-content:center; }
.n-icon { display:inline-flex; line-height:0 }

/* Sidebar */
.sidebar { padding: 12px }
.sidebar-header { display:flex; align-items:center; justify-content:space-between; }
.sidebar-list { list-style:none; padding:0; margin:8px 0 0 0; display:flex; flex-direction:column; gap:4px }
.sidebar-list li button { width:100%; text-align:left; background:#2b2b2b; color:#cfcfcf }
.sidebar-list li.active button { background: rgba(14,165,164,0.12); color:#cfcfcf }
.muted { opacity: .7;font-size: 0.6em; }

/* Content */
.content-wrap { display:flex; flex-direction:column; gap:12px }
.content-header { display:flex; align-items:center; justify-content:space-between }
.links-list { margin:0; padding-left: 20px }
.link-item { margin-bottom: 12px }
.link-row .index { margin-right: 6px; color:#9aa0a6 }

/* Comments */


/* Modal */
.modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,.5); display:flex; align-items:center; justify-content:center; z-index:1000 }
.modal { width: 420px; max-width: calc(100vw - 32px); background:#2b2b2b; color:#cfcfcf; border:1px solid #3a3a3a; border-radius:10px; overflow:hidden }
.modal-header { display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid #3a3a3a }
.modal-body { padding:12px; display:flex; flex-direction:column; gap:10px }
.modal-footer { padding:10px 12px; border-top:1px solid #3a3a3a; display:flex; gap:8px; align-items:center }
.form-row { display:flex; flex-direction:column; gap:6px }
.form-row input { background:#1f1f1f; color:#cfcfcf; border:1px solid #3a3a3a; border-radius:6px; padding:8px }
.message { color:#9aa0a6 }
.modal .link { background:transparent; border-color:transparent; color:#9aa0a6 }
.modal .close { background:#3a3a3a }

/* Global footer: fixed at bottom, two lines stacked and vertically centered */
.global-footer {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(20,20,20,0.9);
  border-top: 1px solid #2b2b2b;
  color: #cbd5dd;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 8px 12px;
  gap: 2px;
  z-index: 900;
  font-size: 0.9em;
}
.global-footer .footer-up-time { font-weight: 600; color: #d0d0d0 }
.global-footer .footer-copyright { color: #9aa0a6 }

/* Add bottom padding to app content so it doesn't sit behind the footer */
.app-content { padding-bottom: 64px }

/* Auth CTA used on Collection/Settings when user is not logged in */
.auth-cta-wrap { display:flex; align-items:flex-start; justify-content:center; padding-top:10vh; padding-bottom:6vh; }
.auth-cta { background: #4fc4a1 !important; color: #0f3d33 !important; border: 1px solid rgba(79,196,161,0.25) !important; padding:14px 22px; border-radius:10px; font-size:1.1em; min-width:180px }
.auth-cta:hover { filter:brightness(0.95) }

/* Slightly larger on mobile: full-width with comfortable padding */
@media (max-width: 520px) {
  .auth-cta { width: 86%; min-width:unset; font-size:1.05em; padding:12px 18px }
  .auth-cta-wrap { padding-top:6vh; padding-bottom:4vh }
}

/* Optional hint text under CTA */
.auth-cta-hint { display:block; text-align:center; margin-top:10px; color:var(--muted-color, #9aa0a6); font-size:0.95em }

/* Ensure category page add/edit forms are responsive like Home */
.add-link-form { display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-bottom:12px }
.add-link-form input { min-width:120px; max-width:calc(100% - 120px); box-sizing:border-box }
.add-link-form button { white-space:nowrap }
